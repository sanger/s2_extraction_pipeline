{
  "role_priority": [
    "samples.shipping.blood_!na.awaiting_shipping",
    "samples.shipping.blood_!na.awaiting_shipping.batched",
    "samples.extraction.lysing.prelysing.blood.awaiting_reception",
    "samples.extraction.lysing.prelysing.blood",
    "samples.extraction.lysing.prelysing.blood.batched",
    "samples.extraction.lysing.blood",
    "samples.extraction.rack.bio_robot_dna_and_rna",
    "samples.extraction.lysing.blood.biorobot.batched"
  ],
  "workflows": [
    {
      "accepts": "samples.extraction.lysing.prelysing.blood.awaiting_reception",
      "controllerName": "selection_page_controller",
      "processTitle": "Receive Tubes",
      "capacity": 96,
      "input": {
        "role": "samples.extraction.lysing.prelysing.blood.awaiting_reception",
        "model": "tubes"
      },
      "output": [
        {
          "role": "samples.extraction.lysing.prelysing.blood",
          "aliquotType": "blood",
          "not_batched": true
        }
      ]
    },
    {
      "accepts": "samples.extraction.lysing.prelysing.blood",
      "controllerName": "selection_page_controller",
      "processTitle": "Batch for Prelysing transfer",
      "capacity": 96,
      "input": {
        "role": "samples.extraction.lysing.prelysing.blood",
        "model": "tubes"
      },
      "output": [
        {
          "role": "samples.extraction.lysing.prelysing.blood.batched",
          "aliquotType": "blood"
        }
      ]
    },
    {
      "accepts": "samples.extraction.lysing.prelysing.blood.batched",
      "controllerName": "step_controller",
      "printerType": 2,
      "buttons": [
        {
          "action": "print",
          "title": "Print labels"
        },
        {
          "action": "next",
          "title": "Next"
        }
      ],
      "processTitle": "Prelysing transfer",
      "controllers": [
        {
          "controllerName": "connected_controller",
          "behaviours": {
            "start": "row",
            "operate": "row",
            "complete": "row",
            "done": "next",
            "outputs": "print"
          },
          "input": {
            "role": "samples.extraction.lysing.prelysing.blood.batched",
            "model": "tubes",
            "title": "Blood tube",
            "aliquotType": "blood"
          },
          "output": [
            {
              "role": "samples.extraction.bio_robot_dna_and_rna.input_tube_nap",
              "model": "tubes",
              "purpose": "stock",
              "title": "Blood tube",
              "aliquotType": "blood",
              "not_batched": true
            }
          ]
        }
      ]
    },
    
    {
      "accepts": "samples.extraction.rack.bio_robot_dna_and_rna",
      "controllerName": "selection_page_controller",
      "processTitle": "Receive Tubes - Batch for Blood Lysing",
      "capacity": 4,
      "input": {
        "role": "samples.extraction.rack.bio_robot_dna_and_rna",
        "model": "tube_racks",
        "attributes":  {
          "number_of_rows": 6,
          "number_of_columns": 4
        }        
      },
      "output": [
        {
          "role":       "samples.extraction.lysing.blood.biorobot.batched"
        }
      ]
    },
    {
      "accepts":        "samples.extraction.lysing.blood.biorobot.batched" ,
      "controllerName": "steplinear_controller",
      "printerType": 1,
      "defaultPrinter":"d304bc",
      "buttons": [{ "action": "print", "title": "Print Destination Plate Barcode", "alwaysEnabled": true },
                  { "action": "start", "title": "Start Biorobot" },
                  { "action": "end",   "title": "Finish Biorobot" },
                  { "action": "next",  "title": "Done" }
      ],
      "processTitle":  "Biorobot - Blood Lysing and Extraction",
      "controllers": [
      {
        "controllerName": "robot_controller",
        "group": "biorobot",
        "barcode": "BIOROBOT"
      },      
      {
        "controllerName":   "linear_controller",
        "behaviours": {
          "start": "start",
          "operate": "start",
          "complete": "end",
          "done": "next",
          "outputs": "print"
        },
        "rowBehaviour":  "bedVerification",
        "input": {
          "role":  "samples.extraction.lysing.blood.biorobot.batched",
          "model": "tube_racks",
          "title": "Tube rack",
          "bedTracking": true
        },
        "output": [{
          "role": "samples.extraction.lysing.blood.biorobot.lysed",
          "aliquotType":  "blood",
          "purpose":     "stock",
          "model":       "plates",
          "title":      "Plate",
          "bedTracking": true
        }]
      }]
    },
    {
      "accepts":  "samples.shipping.blood_!na.awaiting_shipping" ,
      "controllerName":"selection_page_controller",
      "processTitle": "Sample Shipping - Batching",
      "input": {
        "role": "samples.shipping.blood_!na.awaiting_shipping",
        "model": "tubes"
      },
      "output": [
        {
          "role": "samples.shipping.blood_!na.awaiting_shipping.batched",
          "model": "tubes"
        }
      ]
    },
    {
      "accepts": "samples.shipping.blood_!na.awaiting_shipping.batched",
      "processTitle": "Sample Shipping",
      "controllerName": "step_controller",
      "output": [
        {
          "role": "samples.shipping_blood_!na.shipped"
        }
      ],
      "buttons": [
        {
          "action": "ship",
          "title": "Ship Samples"
        },
        {
          "action": "next",
          "title": "Done"
        }
      ],
      "controllers": [
        {
          "controllerName": "location_controller",
          "output": [
            {
              "role": "samples.shipping.blood_!na.shipped"
            }
          ]
        }
      ]
    }
  ]
}
